{# @var craft \craft\web\twig\variables\CraftVariable #}
{%- minify -%}
{% set baseUrl = alias('@baseUrl') ~ '/' %}
{% header "Link: <#{baseUrl}>; rel=dns-prefetch;,<#{baseUrl}>; rel=preconnect; crossorigin;" %}

<!DOCTYPE html>
{%- endminify -%}

<html lang="{{ craft.app.language |slice(0,2) }}" prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb#">

	{%- minify -%}
	<head>
		<link rel="dns-prefetch" href="{{ baseUrl }}">
		<link rel="preconnect" href="{{ baseUrl }}" crossorigin>

		{# -- Any <link> tags that should be included in the header #}
		{% block _head_links %}{% endblock %}

		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

		{# {
			# -- Register our Service Worker -- #
		} #}
		<script>
		{% if not craft.app.config.general.devMode %}
			{{ source("_inlinejs/register-service-worker.min.js") }}
		{% endif %}
		{{ source("_inlinejs/tiny-cookie.min.js") }}
		</script>



		{# {% import "_partials/_macros.twig" as macro %} #}
		{% include "_partials/_global_header.twig" %}

		{%- endminify -%}

		{# -- 
			----- CSS 
		-- #}
		<style>
			{% include "_inlinecss/site-fonts.css" %}
		</style>

		<!--#if expr="$HTTP_COOKIE=/critical\-css\=1/"-->
			{{ craft.twigpack.includeCssModule("styles.css", false) }}
		<!--#else-->
			<script>
				Cookie.set("critical-css", '1', {
					expires: "7D",
					secure: true
				});
			</script>
			{{ craft.twigpack.includeCriticalCssTags() }}

			{{ craft.twigpack.includeCssModule("styles.css", true) }}
		<!--#endif-->

		{# -- 
			----- JS 
		-- #}
		{% block _head_js %}{% endblock %}

		{# COOKIE POLICY #}
		{# TODO: seaomatic #}

		{# {% if getCookie('cookiesAccepted') %}
 			{% do seomatic.script.container().clearCache(true) %}
			{% do seomatic.script.get("googleAnalytics").include(true) %}
			{% do seomatic.script.get('facebookPixel').include(true) %}
			{% do seomatic.script.get('gtag').include(true) %}
			{% do seomatic.script.get('googleTagManager').include(true) %}
			{% do seomatic.script.container().clearCache(true) %}
		{% else %}
			{% do seomatic.script.container().clearCache(false) %}
			{% do seomatic.script.get("googleAnalytics").include(false) %}
			{% do seomatic.script.get('facebookPixel').include(false) %}
			{% do seomatic.script.get('gtag').include(false) %}
			{% do seomatic.script.get('googleTagManager').include(false) %}
			{% do seomatic.script.container().clearCache(true) %}
		{% endif %} #}

	</head>

	{# -- HTML Body -- #}
	<body>
		<div id="page-container">
			<div id="fb-root"></div>
			{# -- Page header, including _navbar.twig -- #}

			<div id="app">
				{{ csrfInput() }}
				<main>
					{% block content %}{% endblock %}
				</main>
			</div>
		</div>
		{%- minify -%}
		{{ craft.twigpack.includeSafariNomoduleFix() }}
		{{ craft.twigpack.includeJsModule("app.js", false) }}
		{{ craft.twigpack.includeJsModule("styles.js", false) }}

		{% block _inline_js %}{% endblock %}
		{%- endminify -%}

	</body>
</html>